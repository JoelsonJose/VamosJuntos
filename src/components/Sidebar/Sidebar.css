@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');

/* --- SIDEBAR DESKTOP (Padrão) --- */
.sidebar {
  width: 14.375rem; /* 230px */
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  background: var(--cor-fundo-card);
  padding: 0.1875rem 0.75rem;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  box-shadow: 2px 0 8px rgba(0,0,0,0.03);
  z-index: 900;
  border-right: 1px solid var(--cor-borda-cinza);
}

.sidebar-top {
  display: flex;
  flex-direction: column;
  align-items: center;
  flex-grow: 1;
  overflow-y: auto;
  overflow-x: hidden;
}

.sidebar-logo {
  width: 100%;
  display: flex;
  justify-content: center;
  position: relative;
  cursor: default;
}

.sidebar-logo img {
  width: 4rem;
  height: 4rem;
  object-fit: contain;
  margin-top: 3.125rem;
}

.sidebar-nav {
  display: flex;
  flex-direction: column;
  padding: 1.5625rem 0.25rem;
}

/* Botões do Menu */
.nav-btn {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.75rem; 
  width: 90%;
  margin: 0.625rem auto; 
  background: var(--cor-fundo-card); 
  border: none;
  border-radius: 0.75rem;
  font-weight: 500;
  font-size: 1rem;
  color: var(--cor-texto-principal);
  cursor: pointer;
  transition: all 0.3s ease;
  text-decoration: none;
  box-sizing: border-box; 
}

.nav-icon {
  width: 1.375rem; height: 1.375rem;
}

.nav-btn.active {
  background-color: var(--cor-roxo-principal);
  color: #fff;
}

.nav-btn:not(.active):hover { 
  background-color: #f3e8ff; 
  transform: translateY(-2px); 
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
}

.sidebar-footer {
  flex-shrink: 0;
  display: flex;
  gap: 0.5rem;
  justify-content: center;
  align-items: center;
  padding: 1rem;
  border-top: 1px solid var(--cor-borda-cinza);
}

.footer-btn {
  appearance: none;
  -webkit-appearance: none;
  background: transparent;
  border: none;
  outline: none;
  padding: 0.625rem;
  border-radius: 0.75rem;
  cursor: pointer;
  transition: all 0.3s ease;
  text-decoration: none;
  display: flex;
  align-items: center;
  justify-content: center;
}
.footer-btn:hover {
  background-color: var(--cor-fundo-card-alt);
}
.footer-btn img {
  width: 1.375rem; height: 1.375rem;
  object-fit: contain;
}

/* --- Ícones Dinâmicos W/B --- */
.nav-icon-container {
  position: relative;
  width: 1.375rem; height: 1.375rem;
  flex-shrink: 0; 
}
.nav-icon-container .nav-icon {
  width: 100%; height: 100%;
  object-fit: contain;
  position: absolute;
  top: 0; left: 0;
  transition: opacity 0.2s ease-in-out;
}
.nav-btn .icon-w { opacity: 0; }
.nav-btn .icon-b { opacity: 1; }
.nav-btn.active .icon-w { opacity: 1; }
.nav-btn.active .icon-b { opacity: 0; }

/* ==========================================
   NOVA BARRA SUPERIOR MOBILE (TOP BAR)
   ========================================== */

.mobile-top-bar {
  display: none; /* Escondido no Desktop */
}

/* APENAS NO MOBILE (< 992px) */
@media (max-width: 992px) {

  .mobile-top-bar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 70px; /* Altura fixa da barra */
    
    background-color: #fff; /* Fundo branco */
    box-shadow: 0 2px 10px rgba(0,0,0,0.08); /* Sombra suave em baixo */
    z-index: 1050; /* Fica acima de quase tudo */
    padding: 0 20px;
    box-sizing: border-box;
  }

  /* Esquerda e Direita */
  .top-bar-btn {
    background: transparent;
    border: none;
    padding: 8px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    color: #333; /* Cor do ícone hambúrguer */
  }
  .top-bar-btn:active {
    background-color: #f0f0f0;
  }

  /* Ícones da direita */
  .icon-mobile-black {
    width: 24px;
    height: 24px;
    object-fit: contain;
  }

  /* Logo Central */
  .top-bar-logo {
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .top-bar-logo img {
    height: 40px; /* Tamanho do logo na barra */
    width: auto;
  }

  .top-bar-actions {
    display: flex;
    gap: 10px;
  }

  /* --- SIDEBAR MOBILE (DRAWER) --- */
  .sidebar {
    transform: translateX(-100%);
    transition: transform 0.3s ease-in-out;
    width: 260px;
    z-index: 1100; /* Fica ACIMA da Top Bar */
    top: 0;
    height: 100vh;
    height: 100dvh;
    border-right: none;
    box-shadow: 4px 0 20px rgba(0,0,0,0.2);
  }

  .sidebar.mobile-open {
    transform: translateX(0);
  }

  .sidebar-footer {
     display: none;
  } 
  
  /* Backdrop Escuro */
  .sidebar-backdrop {
    position: fixed;
    top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0,0,0,0.5);
    z-index: 1090; /* Abaixo da sidebar, acima da topbar */
    backdrop-filter: blur(2px);
  }
  
  body.menu-backdrop-active {
    overflow: hidden;
  }
}

/* MODO ESCURO / ALTO CONTRASTE - CORREÇÕES */
body.modo-escuro .mobile-top-bar,
body.alto-contraste .mobile-top-bar {
  background-color: #1e1e1e;
  border-bottom: 1px solid #333;
}

body.modo-escuro .top-bar-btn,
body.alto-contraste .top-bar-btn {
  color: #fff; /* Hambúrguer branco */
}

/* Inverte ícones pretos para branco na Top Bar */
body.modo-escuro .icon-mobile-black,
body.alto-contraste .icon-mobile-black {
  filter: brightness(0) invert(1);
}

/* Correções anteriores de ícones Sidebar mantidas... */
body.modo-escuro .footer-btn .icon-b,
body.alto-contraste .footer-btn .icon-b { opacity: 0 !important; }
body.modo-escuro .footer-btn .icon-w,
body.alto-contraste .footer-btn .icon-w { opacity: 1 !important; }
body.modo-escuro .nav-btn .icon-b,
body.alto-contraste .nav-btn .icon-b { opacity: 0 !important; }
body.modo-escuro .nav-btn .icon-w,
body.alto-contraste .nav-btn .icon-w { opacity: 1 !important; }


/* Quando NÃO for modo escuro e NEM alto contraste... */
body:not(.modo-escuro):not(.alto-contraste) .footer-btn .icon-b {
  opacity: 1 !important; /* Força o ícone PRETO a aparecer */
  filter: none !important; /* Garante que não tenha inversão de cor */
}

body:not(.modo-escuro):not(.alto-contraste) .footer-btn .icon-w {
  opacity: 0 !important; /* Força o ícone BRANCO a sumir */
}

/* Garante que o hover no modo claro não deixe o ícone branco */
body:not(.modo-escuro):not(.alto-contraste) .footer-btn:hover {
  background-color: #f3e8ff; /* Fundo roxo claro padrão */
}